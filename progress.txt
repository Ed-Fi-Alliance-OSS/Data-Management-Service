- Task: NameOverrides semantics (DMS-931 story 02-naming-and-overrides.md)
  Decisions: allow inside-reference overrides for identity JSONPaths only; apply identity overrides to propagated reference identity columns + constraint lookup; relax collection override derivation (no descendant requirement, segment-only or fully-qualified with implied-prefix stripping); add superclass resource name/context for override resolution.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelBuilderPipeline.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtractInputsStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelSetSchemaHelpers.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DeriveTableScopesAndKeysStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtensionTableDerivationRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ReferenceBindingRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ReferenceConstraintRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/SchemaInputValidationTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/NameOverrideTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ReferenceBindingRelationalModelSetPassTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-name-override-nested-segment-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/ds-5.2/expected/authoritative-relational-model.manifest.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/sample/expected/authoritative-derived-relational-model-set.json; tasks.json; progress.txt
  Notes: UPDATE_GOLDENS=1 dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests feature warning.
- Task: Apply dialect identifier shortening (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added ApplyDialectIdentifierShorteningRelationalModelSetPass to shorten schemas/tables/columns/constraints/indexes/triggers/bindings/abstract artifacts after constraint hashing; moved dialect-shortening collision detection into pass and added schema collision registration; updated default pass order and collision/shortening tests; refreshed authoritative sample expected output for shortened identifiers.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ApplyDialectIdentifierShorteningRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/IdentifierCollisionDetector.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelSetBuilderContext.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelSetPasses.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DialectIdentifierShorteningTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/IdentifierShorteningCollisionTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/RelationalModelSetPassesTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/sample/expected/authoritative-derived-relational-model-set.json; tasks.json; progress.txt
  Notes: UPDATE_GOLDENS=1 dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln (existing SyntheticTests warning).
- Task: Update override design docs (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Clarified nameOverrides rules to allow reference-identity overrides, keep reference-object overrides, and allow segment-only or fully-qualified collection overrides with prefix stripping; added examples for inside-reference identity override and ancestor-only collection override.
  Files: reference/design/backend-redesign/design-docs/flattening-reconstitution.md; tasks.json; progress.txt
  Notes: Doc-only change; no build/test run.
- Task: Naming-stress fixtures/tests (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added naming-stress core/extension/collision fixtures to exercise long identifiers, overrides (scalar/reference/array + inside-reference identity), extension auto-prefixing, schema normalization, and override collision diagnostics; added focused tests validating shortened identifiers and collision messaging; registered new fixtures in test csproj content list.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-naming-stress-core-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-naming-stress-extension-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-naming-stress-collision-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/NamingStressFixtureTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests feature warning.
- Task: Allow inside-reference identity overrides during input validation (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Task already implemented in ExtractInputsStep; inside-reference overrides allowed only for reference identity JSONPaths; non-identity inside-reference keys still fail fast. Marking complete after test verification.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed.
- Task: Inside-reference identity overrides for propagated columns (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Verified ReferenceBindingRelationalModelSetPass already applies identity nameOverrides to propagated reference identity columns; no code changes needed.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed.
- Task: Relax collection override derivation (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Verified collection override relaxation already implemented via ResolveCollectionOverrideBaseName; no code changes needed; existing tests cover missing descendant + segment/qualified overrides.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Update schema input validation tests for inside-reference identity overrides (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Tests already present for allowed identity override and rejected non-identity inside reference; marked task complete after verification.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed.
- Task: Update override derivation tests to allow missing descendant collection overrides (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Verified NameOverrideTests already assert successful build and expected table/key names for missing descendant override; no code change needed.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed.
- Task: Nested collection override prefix-compat test (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Verified existing NameOverrideTests already cover segment-only nested override vs fully-qualified value yielding same derived table name; no code change required.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed.
- Task: Verification (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Ran required test/build loops; no code changes needed; confirmed authoritative inputs unchanged.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning; git status clean.
- Task: Collision detection gaps for duplicate identifiers (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Detectors now de-dupe by origin (not original name) with deterministic ordering; shared dms.Descriptor artifacts ignore per-resource labels to avoid false collisions; added tests asserting duplicate-origin collisions.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/OverrideCollisionDetector.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/IdentifierCollisionDetector.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/CollisionDetectorOriginTests.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Refactor ProjectSchemasInEndpointOrder mutation (DMS-931 story 02-naming-and-overrides.md)
  Decisions: RelationalModelSetBuilderContext now owns a mutable project schema list with read-only view + update helpers; ApplyDialectIdentifierShortening uses context update method; dialect-shortening fixture/test updated and added small MaxIdentifierLength schema-shortening test.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelSetBuilderContext.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ApplyDialectIdentifierShorteningRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DialectIdentifierShorteningTests.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: RootTableNameOverride collision tests (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added hand-authored fixtures for root-vs-root and root-vs-child table collisions; tests assert shortening-stage collision diagnostics include schema, table, resource labels, and JSON paths; verify deterministic messages when resource order reverses.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-root-override-collision-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-root-override-child-collision-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/RootTableNameOverrideCollisionTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Remove hasOverriddenAncestor plumbing (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Dropped unused hasOverriddenAncestor parameter/state from base and extension collection-table traversal; no behavior change.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DeriveTableScopesAndKeysStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtensionTableDerivationRelationalModelSetPass.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Remove RelationalNameConventions.ForeignKeyName helper (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Removed unused legacy FK naming helper and its tests; keep ConstraintNaming as sole FK naming source.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalNameConventions.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/RelationalNameConventionsTests.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Add ds-5.2 derived golden manifest test (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added derived-set golden test that maps resource endpoint names from project schema to derived resources and emits project-level manifest via RelationalModelManifestEmitter; captures extension sites via set-level pass.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/RelationalModelDerivedAuthoritativeGoldenTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/ds-5.2/expected/authoritative-relational-model.derived.manifest.json; tasks.json; progress.txt
  Notes: UPDATE_GOLDENS=1 dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Derived ds-5.2 expected manifest verification (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Verified derived manifest already present and includes StudentSchoolAssociation reference-bound columns; regenerated goldens with UPDATE_GOLDENS=1 produced no diff.
  Files: tasks.json; progress.txt
  Notes: UPDATE_GOLDENS=1 dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Align index/trigger uniqueness validation with collision detection (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Pgsql index names schema-scoped, trigger names table-scoped; Mssql index names table-scoped, trigger names schema-scoped; uniqueness validation + shortening collision scopes aligned per dialect; added tests for duplicate names and shortening collisions across tables.
  Files: reference/design/backend-redesign/design-docs/data-model.md; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelSetBuilderContext.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/IdentifierCollisionDetector.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DerivedRelationalModelSetBuilderInvariantTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/IdentifierShorteningScopeTests.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Align index/trigger uniqueness validation with collision detection (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Confirmed doc + implementation already align: Pgsql index names schema-scoped, trigger names table-scoped; Mssql index names table-scoped, trigger names schema-scoped. No code changes; marking task complete after test/build verification.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln (existing SyntheticTests warning).
- Task: E02/E15 quoting regression tests (E02/E15 follow-up in tasks.json)
  Decisions: Added SqlIdentifierQuoter helper in Backend.External; introduced RelationalModelDdlEmitter in Backend.Ddl that quotes schema/table/column/constraint/index/trigger identifiers while emitting minimal deterministic DDL; added Pgsql/Mssql NUnit tests that build a reserved-identifier DerivedRelationalModelSet and assert quoted SQL with no unquoted occurrences; wired test project to Backend.Ddl.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.External/SqlIdentifierQuoter.cs; src/dms/backend/EdFi.DataManagementService.Backend.Ddl/RelationalModelDdlEmitter.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DdlIdentifierQuotingTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/EdFi.DataManagementService.sln failed (E2E/config service localhost:8081 refused; Old.Postgresql integration errors "securityelements" column missing); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Deduplicate collision detector implementations (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added CollisionDetectorCore to centralize source registration + deterministic ordering/formatting; detectors now pass shared-descriptor predicate while preserving existing messages.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/CollisionDetectorCore.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/OverrideCollisionDetector.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/IdentifierCollisionDetector.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Centralize truncate+hash identifier shortening utilities (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added SqlIdentifierShortening helper to handle hash+truncate with dialect length units; ConstraintNaming now delegates with signature hash input; SqlDialectRulesUtilities delegates to helper for identifier hashing.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.External/SqlIdentifierShortening.cs; src/dms/backend/EdFi.DataManagementService.Backend.External/SqlDialectRules.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ConstraintNaming.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests feature warning.
- Task: Clarify override collision tracking between accumulators and detector (DMS-931 story 02-naming-and-overrides.md)
  Decisions: rely on TableColumnAccumulator/TableBuilder for per-table column collisions; keep OverrideCollisionDetector for table/key columns; removed redundant RegisterColumn calls for derived columns; clarified responsibilities in comments.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DeriveColumnsAndBindDescriptorEdgesStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ReferenceBindingRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtensionTableDerivationRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/TableColumnAccumulator.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/OverrideCollisionDetector.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Consolidate BuildReferenceIdentityPathSet helper (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Centralized reference identity path set creation in RelationalModelSetSchemaHelpers and reused it across base, extension, and input validation steps to prevent drift; behavior unchanged.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelSetSchemaHelpers.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtractInputsStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DeriveColumnsAndBindDescriptorEdgesStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtensionTableDerivationRelationalModelSetPass.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Remove duplicate JSONPath prefix logic (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Reused RelationalModelSetSchemaHelpers.IsPrefixOf for reference-object prefix checks; removed local IsSegmentPrefix helper to avoid drift.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtractInputsStep.cs; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded (existing SyntheticTests warning).
- Task: RelationalModel folder restructure plan doc (DMS-931 story 02-naming-and-overrides.md)
  Decisions: chose taxonomy aligned to current pipeline/set-pass architecture; mapped every current top-level RelationalModel .cs file (46) exactly once; placed orchestration entry points (RelationalModelBuilderPipeline/RelationalModelSetPasses/DerivedRelationalModelSetBuilder) under Build for discoverability; added optional Diagnostics bucket for collision tooling.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/FOLDER-RESTRUCTURE.md; tasks.json; progress.txt
  Notes: mapping coverage check passed (source 46, mapped 46, duplicates 0); dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests feature warning.
- Task: RelationalModel folder restructure phase 1 (DMS-931 story 02-naming-and-overrides.md)
  Decisions: executed approved FOLDER-RESTRUCTURE mapping only; moved 46 top-level files into Build/Build/Steps/SetPasses/Schema/Validation/Naming/Constraints/DescriptorPaths/Diagnostics; preserved type names + namespace declarations.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/Steps/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Schema/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Validation/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Naming/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Constraints/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DescriptorPaths/*; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Diagnostics/*; tasks.json; progress.txt
  Notes: rg public/internal type scan run; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded (existing SyntheticTests warning); dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (250/250).
- Task: RelationalModel cleanup phase 2 split orchestration/context types (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Split `RelationalModelBuilderPipeline.cs` public types into dedicated files with matching names; split `ProjectSchemaContext` and `ConcreteResourceSchemaContext` out of set-builder context file; preserved signatures/behavior and kept private helper types colocated.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/IRelationalModelBuilderStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/RelationalModelBuilderContext.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/DescriptorPathSource.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/RelationalModelBuildResult.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/RelationalModelBuilderPipeline.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/ProjectSchemaContext.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/ConcreteResourceSchemaContext.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/RelationalModelSetBuilderContext.cs; tasks.json; progress.txt
  Notes: Build scope check passed (`rg -n "^public\\s" .../Build` no multi-public files); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded (existing SyntheticTests warning only); dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (250/250).
- Task: RelationalModel optional phase 3 set-pass renames (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Renamed concrete set-pass types/files from `*RelationalModelSetPass` to `*Pass` for readability; kept `IRelationalModelSetPass` contract and default pass order unchanged; updated all production/test references.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/*.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/RelationalModelSetPasses.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/AbstractIdentityTableDerivationTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/CanonicalizeOrderingRelationalModelSetPassTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ConstraintDerivationRelationalModelSetPassTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DialectIdentifierShorteningTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ExtensionTableDerivationTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ExtractInputsStepCachingTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/IdentifierShorteningCollisionTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/IdentifierShorteningScopeTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ReferenceBindingRelationalModelSetPassTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/RelationalModelSetPassesTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/FOLDER-RESTRUCTURE.md; tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (250/250); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded (existing SyntheticTests warning).
- Task: RelationalModel restructure validation (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Ran required post-restructure feedback loops + namespace scan + diff check; no regressions; no accidental out-of-scope changes detected.
  Files: tasks.json; progress.txt
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (250/250); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning; rg -n "^namespace " ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel showed expected namespace declarations; git diff --name-status empty.
- Task: RelationalModel documentation update (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Rewrote RelationalModel README to match post-restructure layout; added folder taxonomy + per-folder responsibilities; updated set-level derivation section to current `*Pass` naming and default pass order; corrected derived-set sample to use `PgsqlDialectRules` from Backend.External.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/README.md; tasks.json; progress.txt
  Notes: Symbol/path spot-checks via rg passed; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (250/250); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Deterministic primary-key naming + dialect hashing/shortening + DDL named PK emission (DMS-931 story 02-naming-and-overrides.md)
  Decisions: `TableKey` now carries `ConstraintName`; base/extension/abstract derivation assigns `PK_{TableName}` deterministically at creation. `ApplyConstraintDialectHashingPass` and `ApplyDialectIdentifierShorteningPass` now process PK names and PK collisions are included in shortening diagnostics. DDL emitter now writes `CONSTRAINT <name> PRIMARY KEY (...)` with dialect quoting; emitter falls back to `PK_{TableName}` when hand-authored fixtures omit key names.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.External/RelationalModelTypes.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Constraints/ConstraintNaming.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Constraints/ConstraintIdentity.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/Steps/DeriveTableScopesAndKeysStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ExtensionTableDerivationPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/AbstractIdentityTableDerivationPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ApplyConstraintDialectHashingPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ApplyDialectIdentifierShorteningPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.Ddl/RelationalModelDdlEmitter.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DeriveTableScopesAndKeysStepTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ConstraintNamingTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DialectIdentifierShorteningTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/IdentifierShorteningCollisionTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.Ddl.Tests.Unit/RelationalModelDdlEmitterTests.cs; plus TableKey-constructor updates in related unit tests.
  Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (255/255); dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Ddl.Tests.Unit/EdFi.DataManagementService.Backend.Ddl.Tests.Unit.csproj passed (148/148); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded (existing SyntheticTests warning only).
- Task: Case-insensitive _ext project-key resolution across derivation paths (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added one shared `ExtensionProjectKeyComparer` (OrdinalIgnoreCase) in RelationalModelSetSchemaHelpers; switched `_ext` endpoint/project-name matching in RelationalModelSetBuilderContext, ExtractInputsStep, and ExtensionTableDerivationPass to use it; kept non-extension matching behavior unchanged.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Schema/RelationalModelSetSchemaHelpers.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/RelationalModelSetBuilderContext.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/Steps/ExtractInputsStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ExtensionTableDerivationPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ExtensionProjectKeyResolutionTests.cs; tasks.json; progress.txt
  Notes: Added mixed-case coverage in ExtensionProjectKeyResolutionTests including full set-derivation path (`_ext.SaMpLe`) + relative override assertion; dotnet csharpier format on touched files; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (258/258); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
- Task: Reference-relative propagated identity column naming bugfix (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added `BuildReferenceIdentityFieldBaseName(referenceObjectPath, referenceValuePath)` with fail-fast descendant/empty/array validation. ReferenceBindingPass + ReferenceConstraintPass now derive propagated identity part names from reference-side paths; keep `IdentityJsonPath` for semantic target binding/descriptor resolution only. Added shared duplicate-name disambiguation (`ResolveReferenceIdentityPartBaseName`) so mappings that reuse one reference path for multiple target identity paths still resolve deterministically via target identity base names.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Schema/RelationalModelSetSchemaHelpers.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ReferenceBindingPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ReferenceConstraintPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ReferenceBindingRelationalModelSetPassTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/ds-5.2/expected/authoritative-relational-model.derived.manifest.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/sample/expected/authoritative-derived-relational-model-set.json; tasks.json; progress.txt
  Notes: initial test run failed on authoritative expected diffs + duplicate reference-path collision edge; fixed with duplicate-name fallback. UPDATE_GOLDENS=1 dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed; dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded (existing SyntheticTests warning).
- Task: Reference-relative naming regression coverage + ds-5.2 manifest assertions (DMS-931 story 02-naming-and-overrides.md)
  Decisions: Added focused reference-binding fixture where target identity paths contain nested `*Reference` segments but reference-side identity fields are flattened; assertions require `ClassPeriod_SchoolId`, `Calendar_SchoolYear`, and `ProgramProgram_EducationOrganizationId` and reject inflated `*Reference*` variants. Added explicit ds-5.2 derived-manifest assertions for the same names/forbidden variants; UPDATE_GOLDENS run produced no expected-fixture diff.
  Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ReferenceBindingRelationalModelSetPassTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/RelationalModelDerivedAuthoritativeGoldenTests.cs; tasks.json; progress.txt
  Notes: UPDATE_GOLDENS=1 dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (260/260); dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj passed (260/260); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln succeeded with existing SyntheticTests warning.
