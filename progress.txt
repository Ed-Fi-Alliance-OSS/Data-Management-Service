- Task: DMS-1033 set-level contract surface + dialect rules (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: new Backend.External project for shared contracts; SqlDialect + SchemaComponentInfo/ResourceKeyEntry/EffectiveSchemaInfo in EdFi.DataManagementService.Backend.External; ISqlDialectRules with deterministic truncate+hash shortening (byte-based for Pgsql, char-based for Mssql); scalar type defaults aligned to data-model.md.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.External/EdFi.DataManagementService.Backend.External.csproj; src/dms/backend/EdFi.DataManagementService.Backend.External/EffectiveSchemaContracts.cs; src/dms/backend/EdFi.DataManagementService.Backend.External/SqlDialectRules.cs; src/dms/EdFi.DataManagementService.sln; tasks.json.
  - Notes: build warning persists: missing feature for Features/SyntheticTests/DocumentValidation.feature.cs.
- Task: EffectiveSchemaSet contract (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added EffectiveProjectSchema + EffectiveSchemaSet with ProjectSchema as projectSchema node (JsonObject) to avoid file I/O and enforce ordered project list.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.External/EffectiveSchemaSetContracts.cs; tasks.json.
  - Notes: build warning persists for missing Features/SyntheticTests/DocumentValidation.feature.
- Task: Move relational model types to Backend.External (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: moved RelationalModelTypes/InputTypes into Backend.External; QualifiedResourceName now lives with relational model contracts; added global using for Backend.External in RelationalModel + tests; RelationalModel now references Backend which references Backend.External for transitive access.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.External/RelationalModelTypes.cs; src/dms/backend/EdFi.DataManagementService.Backend.External/RelationalModelInputTypes.cs; src/dms/backend/EdFi.DataManagementService.Backend.External/EffectiveSchemaContracts.cs; src/dms/backend/EdFi.DataManagementService.Backend/EdFi.DataManagementService.Backend.csproj; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/EdFi.DataManagementService.Backend.RelationalModel.csproj; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/GlobalUsings.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/GlobalUsings.cs; tasks.json.
  - Notes: build warning persists for missing Features/SyntheticTests/DocumentValidation.feature.cs.
- Task: DerivedRelationalModelSet contract surface (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added contract types for derived model set (project schema info, concrete/abstract inventories, index/trigger inventories) in Backend.External aligned to compiled-mapping-set.md.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.External/DerivedRelationalModelSetContracts.cs; tasks.json.
  - Notes: build warning persists for missing Features/SyntheticTests/DocumentValidation.feature.cs.
- Task: DerivedRelationalModelSetBuilder pass orchestration + context (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added IRelationalModelSetPass with explicit Order; builder sorts passes by (Order, type name) and fails on duplicate ordering keys; context precomputes canonical project/resource order, validates physical-schema collisions, exposes canonical enumerators, and sorts concrete resources in BuildResult for deterministic output.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; tasks.json.
  - Notes: dotnet build + relational-model unit tests passed.
- Task: EffectiveSchemaInfo consistency validation (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: validate ResourceKeyCount, duplicate ResourceKeyId/resource pairs, and missing/extra resource keys in RelationalModelSetBuilderContext before passes; include resourceSchemas + abstractResources + isResourceExtension entries.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EffectiveSchemaInfoValidationTests.cs; tasks.json.
  - Notes: dotnet build + relational-model unit tests passed.
- Task: documentPathsMapping target validation (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: built effective resource index once in builder context; validate documentPathsMapping entries with isReference=true against index and include mapping key/path + source/target in errors.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DocumentPathsMappingValidationTests.cs; tasks.json.
  - Notes: dotnet build + relational-model unit tests passed.
- Task: Cross-project descriptor-path inference + _ext partition (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: introduced DescriptorPathInference helper for multi-project descriptor path propagation; RelationalModelSetBuilderContext partitions base vs _ext descriptor paths and exposes accessors; ExtractInputsStep now honors DescriptorPathSource.Precomputed; added multi-project unit test covering cross-project propagation + _ext partition.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DescriptorPathInference.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ExtractInputsStep.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/RelationalModelBuilderPipeline.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DescriptorPathInferenceTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Base traversal set-level pass (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added BaseTraversalRelationalModelSetPass to run per-resource pipeline with precomputed base descriptor paths; skip isResourceExtension resources; context now tracks extension sites per resource for later passes.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/BaseTraversalRelationalModelSetPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: _ext project-key resolution and validation (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: validate extension project keys on registration; resolve by endpoint name then project name (case-insensitive), cache per key; errors include resource + owning scope + extension path + candidate projects for ambiguity.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ExtensionProjectKeyResolutionTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: DMS-1033 set-level builder tests + fixtures (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added hand-authored core+extension ApiSchema fixtures with required maxLengths; added EffectiveSchemaSetFixtureBuilder to build deterministic resource keys + deep-clone project schemas (avoid JsonNode parent errors); added authoritative sample extension fixture + golden manifest output for derived set summary.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EffectiveSchemaSetFixtureBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DerivedRelationalModelSetBuilderTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DerivedRelationalModelSetAuthoritativeGoldenTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DescriptorPathInferenceTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-core-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/set-builder/hand-authored-extension-api-schema.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/sample/inputs/sample-api-schema-authoritative.json; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/Fixtures/authoritative/sample/expected/dms-1033-derived-relational-model-set.json; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Determinism manifest test for derived set ordering (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: built deterministic manifest from derived set using RelationalModelManifestEmitter per resource; added capture pass to record extension sites for manifest inclusion; manifest includes project list + per-resource tables/columns/descriptor edges/extension sites.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DerivedRelationalModelSetDeterminismTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Deterministic pass ordering tests (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added pass-ordering fixture with distinct pass types to assert sort by Order then type name; duplicate key test asserts fast-fail InvalidOperationException.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DerivedRelationalModelSetBuilderPassOrderingTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Extra resource keys validation test (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added EffectiveSchemaInfo validation test to assert fast-fail for extra ResourceKeysInIdOrder entries with message including unknown resource.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EffectiveSchemaInfoValidationTests.cs; tasks.json.
  - Notes: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: documentPathsMapping target validation for abstractResources (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added abstract resource missing-target test asserting documentPathsMapping error includes mapping key/path + abstract resource + missing target.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DocumentPathsMappingValidationTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Happy-path _ext project-key resolution tests (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added endpoint-name match, project-name fallback, and endpoint-precedence test fixtures asserting resolved ProjectEndpointName.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/ExtensionProjectKeyResolutionTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Identifier shortening tests for Pgsql/Mssql dialect rules (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: added NUnit fixtures covering at/over limit behavior, deterministic shortening, and multibyte byte-vs-char length handling.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/SqlDialectRulesTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: EffectiveSchemaInfo schema-components validation (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: validate SchemaComponentsInEndpointOrder vs ProjectsInEndpointOrder with missing/extra endpoint detection; added tests for missing/extra schema components via fixture override.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EffectiveSchemaInfoValidationTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Deterministic JsonObject iteration for validation + descriptor inference (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: order project schemas by ProjectName in descriptor inference; order resource schemas by (ResourceName, key) and documentPathsMapping by key for deterministic validation + propagation; propagate reference paths in sorted order for stable outcomes.
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DescriptorPathInference.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DescriptorPathInferenceTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DocumentPathsMappingValidationTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
- Task: Dialect mismatch validation in DerivedRelationalModelSetBuilder (reference/design/backend-redesign/epics/01-relational-model/08-derived-relational-model-set-builder.md)
  - Decisions: fail fast when dialectRules.Dialect != dialect with actionable message; added unit test using (Pgsql, MssqlDialectRules).
  - Files: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/DerivedRelationalModelSetBuilder.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DerivedRelationalModelSetBuilderDialectValidationTests.cs; tasks.json.
  - Notes: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln; dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj.
