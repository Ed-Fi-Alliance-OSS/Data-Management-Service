2026-02-10 - Completed task: Contracts (DMS-933, story reference/design/backend-redesign/epics/01-relational-model/04-abstract-union-views.md).
Decisions: Replaced DbColumnModel-based union-view contract with explicit OutputColumns + ordered UnionArms + SQL-free projection AST (SourceColumn/StringLiteral); keep ResourceKeyEntry + FromTable + SourceColumn identifiers in model so DDL emission and shortening can run without ApiSchema lookups.
Files changed: src/dms/backend/EdFi.DataManagementService.Backend.External/DerivedRelationalModelSetContracts.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ApplyDialectIdentifierShorteningPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DerivedRelationalModelSetBuilderOrderingTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/DialectIdentifierShorteningTests.cs; tasks.json.
Feedback loops: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln PASS (1 pre-existing warning in E2E feature codebehind discovery); dotnet test --no-build --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj PASS (307/307).
Blockers/notes: No blockers. Next iteration should populate OutputColumnsInSelectOrder + UnionArmsInOrder during abstract union derivation.
2026-02-10 - Completed task: Derivation (DMS-933, story reference/design/backend-redesign/epics/01-relational-model/04-abstract-union-views.md).
Decisions: Extended AbstractIdentityTableDerivationPass to derive both abstract identity tables + abstract union views in one scan; union view contract now deterministic (DocumentId + identity paths order + Discriminator) with ordered arms by member ResourceName and projection source columns aligned to output contract; added fail-fasts for duplicate member ResourceName across projects, discriminator length >256, subclass superclass not abstract, nullable mapped source columns, missing identity supply, and applied superclassIdentityJsonPath remap regardless subclassType.
Files changed: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/AbstractIdentityTableDerivationPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/AbstractIdentityTableDerivationTests.cs; tasks.json.
Feedback loops: dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln PASS (same pre-existing Reqnroll warning in EdFi.DataManagementService.Tests.E2E); dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj PASS (315/315).
Blockers/notes: No blockers. Next iteration should move pass ordering so abstract derivation runs after ReferenceBindingPass (reference-sourced identity columns available without fallback inference).
2026-02-10 - Completed task: Pass Ordering (DMS-933, story reference/design/backend-redesign/epics/01-relational-model/04-abstract-union-views.md).
Decisions: Reordered default set-pass pipeline so ReferenceBindingPass runs before AbstractIdentityTableDerivationPass and abstract derivation still runs before ReferenceConstraintPass; keeps reference-propagated identity columns available for abstract union/identity derivation without changing constraint stages.
Files changed: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/Build/RelationalModelSetPasses.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/RelationalModelSetPassesTests.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/README.md; tasks.json.
Feedback loops: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj PASS (315/315); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln PASS (same pre-existing Reqnroll warning in EdFi.DataManagementService.Tests.E2E).
Blockers/notes: No blockers. Next iteration should cover Identifier Shortening task and then targeted union-view tests.
2026-02-10 - Completed task: Identifier Shortening (DMS-933, story reference/design/backend-redesign/epics/01-relational-model/04-abstract-union-views.md).
Decisions: Kept union-view shortening behavior (ViewName, output columns, arm FromTable, projection SourceColumn) and extended collision validation to include union-arm source table/column identifiers when not already registered via concrete/abstract artifacts; avoids duplicate-origin false positives while still surfacing actionable collisions.
Files changed: src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/SetPasses/ApplyDialectIdentifierShorteningPass.cs; src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/IdentifierShorteningCollisionTests.cs; tasks.json.
Feedback loops: dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit/EdFi.DataManagementService.Backend.RelationalModel.Tests.Unit.csproj PASS (317/317); dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln PASS (same pre-existing Reqnroll warning in EdFi.DataManagementService.Tests.E2E).
Blockers/notes: No blockers. Next iteration should take the remaining Tests task for additional abstract-union derivation coverage.
