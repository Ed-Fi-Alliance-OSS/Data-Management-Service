# Create a simple tenant in the Configuration Service
#
# Prerequisites:
# - Configuration Service running at localhost:8081 (or update configPort below)
# - System administrator credentials registered (run steps 1-2 if needed)

@configPort=8081
@sysAdminId=sys-admin
@sysAdminSecret=SdfH)98&Jk
@encodedSysAdminSecret=SdfH%2998%26Jk

### Step 1: Register system administrator (skip if already registered)
POST http://localhost:{{configPort}}/connect/register
Content-Type: application/x-www-form-urlencoded

ClientId={{sysAdminId}}
&ClientSecret={{encodedSysAdminSecret}}
&DisplayName=System Administrator

### Step 2: Get access token
# @name configTokenRequest
POST http://localhost:{{configPort}}/connect/token
Content-Type: application/x-www-form-urlencoded

client_id={{sysAdminId}}
&client_secret={{encodedSysAdminSecret}}
&grant_type=client_credentials
&scope=edfi_admin_api/full_access

###
@configToken={{configTokenRequest.response.body.access_token}}

### Step 3: Create Tenant1
# @name createTenant
POST http://localhost:{{configPort}}/v2/tenants/
Content-Type: application/json
Authorization: bearer {{configToken}}

{
    "name": "Tenant1"
}

### Step 4 (Optional): Verify tenant was created
GET http://localhost:{{configPort}}/v2/tenants/
Authorization: bearer {{configToken}}
