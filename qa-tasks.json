[
  {
    "category": "QA - Build & Unit Tests",
    "description": "Confirm the DMS-929 relational-model pipeline compiles and all backend unit tests pass. Acceptance: `dotnet test` for backend unit tests succeeds and `dotnet build` for the DMS solution succeeds with no errors.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj` and confirm the test run is green.",
      "Run: `dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln` and confirm the build is green."
    ],
    "completed": false
  },
  {
    "category": "QA - Authoritative Golden",
    "description": "Validate the derived relational model manifest for the authoritative DS 5.2 ApiSchema is byte-for-byte stable and matches the committed golden. Acceptance: `Given_An_Authoritative_ApiSchema_For_Ed_Fi` passes and no `git diff --no-index` output is produced for the generated manifest.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_An_Authoritative_ApiSchema_For_Ed_Fi\"` and confirm it passes.",
      "If the test fails, inspect the diff output in the test failure and verify the delta is intentional (not ordering or newline drift).",
      "Confirm the emitted manifest uses LF line endings only (no `\\r`)."
    ],
    "completed": false
  },
  {
    "category": "QA - Determinism",
    "description": "Verify the derived model and emitted manifest are deterministic and do not depend on JSON property ordering or dictionary iteration order. Acceptance: manifests produced from semantically identical schemas with different property orders are identical (byte-for-byte).",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_Schemas_With_Different_Property_Order|Given_A_Canonicalized_Model_When_Emitting_A_Manifest\"` and confirm it passes.",
      "Re-run the same tests twice and confirm results and outputs are identical."
    ],
    "completed": false
  },
  {
    "category": "QA - Table Scopes & Keys",
    "description": "Verify base table-scope discovery and composite key rules match the design: root table for `$`, one child table per array path (including nested arrays), and child PKs are `(Root_DocumentId, ancestorOrdinal..., Ordinal)`. Acceptance: fixture resource schemas produce the expected table inventory, key column names, and parent-child FKs with `ON DELETE CASCADE`.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_A_JsonSchema_With_Nested_Collections|Given_A_Complete_Relational_Model_Pipeline\"` and confirm it passes.",
      "Confirm the root table scope is `$` and root key column is `DocumentId`.",
      "Confirm each array path produces a child table with key columns `{Root}_DocumentId`, any `{ParentCollection}Ordinal` columns, and `Ordinal`."
    ],
    "completed": false
  },
  {
    "category": "QA - Nullability Rules",
    "description": "Verify scalar column nullability is derived correctly from JSON Schema required-ness and `x-nullable`, including propagation from optional ancestor objects. Acceptance: required scalar properties are `IsNullable=false` unless any ancestor object is optional or `x-nullable`, and required scalar properties with `x-nullable=true` are `IsNullable=true`.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_An_Inlined_Object_Property|Given_A_Property_With_XNullable\"` and confirm it passes.",
      "Spot-check that `$.a.b.c` in the inlined-object fixture is marked nullable due to the optional ancestor object path.",
      "Spot-check that a required `x-nullable` scalar column is marked nullable."
    ],
    "completed": false
  },
  {
    "category": "QA - Schema Validation",
    "description": "Verify invalid/unsupported JSON Schema features fail fast with actionable, path-inclusive errors (per the story/design contract). Acceptance: `$ref`, `oneOf`/`anyOf`/`allOf`, `patternProperties`, `type: [ ... ]`, and non-object roots are rejected with error messages that include the failing path.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"ValidateJsonSchemaStepTests\"` and confirm it passes.",
      "For at least one failing case (e.g., `$ref`), confirm the exception message includes the failing path segment (e.g., `$.properties.<name>.$ref`).",
      "Confirm descriptor scalar arrays are allowed only when the descriptor mapping exists for the array element path."
    ],
    "completed": false
  },
  {
    "category": "QA - Closed-World additionalProperties",
    "description": "Verify `additionalProperties` is treated as prune/ignore (closed-world persistence): dynamic properties do not create tables/columns and do not cause schema validation errors, even if the `additionalProperties` subtree contains unsupported keywords. Acceptance: manifests are identical whether `additionalProperties` is present or not, and no tables/columns are derived from the `additionalProperties` subtree.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_Schemas_With_And_Without_AdditionalProperties|Given_A_JsonSchema_With_AdditionalProperties_Schema|Given_A_JsonSchema_With_AdditionalProperties_Object\"` and confirm it passes.",
      "Confirm no derived table/column names correspond to any properties defined under `additionalProperties` in the test fixture."
    ],
    "completed": false
  },
  {
    "category": "QA - Descriptor Mapping",
    "description": "Verify descriptor scalar properties and descriptor collections are derived as `..._DescriptorId` FK columns (not string scalars) and that descriptor edge sources are recorded with correct identity-component classification. Acceptance: descriptor string paths produce exactly one FK column, do not produce a scalar string column at the same JSON path, and `DescriptorEdgeSource` entries point to the correct `DescriptorResource` and `DescriptorValuePath`.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_A_Descriptor_Path|Given_A_Descriptor_Scalar_Array|Given_Descriptor_Uri_Strings_Without_MaxLength|Given_A_Complete_Relational_Model_Pipeline\"` and confirm it passes.",
      "Confirm root descriptor scalars create a `..._DescriptorId` column and a FK to `dms.Descriptor(DocumentId)` with `OnDelete=NoAction` and `OnUpdate=NoAction`.",
      "Confirm descriptor collections create a child table with a single descriptor FK column and a `DescriptorEdgeSource` for the `$.<collection>[*]` JSON path."
    ],
    "completed": false
  },
  {
    "category": "QA - String Type Rules",
    "description": "Verify scalar string type mapping and maxLength enforcement follow the updated contract: (a) plain string scalars require `maxLength` unless explicitly allow-listed, (b) formatted date/time strings map to temporal scalar kinds without requiring `maxLength`, and (c) allow-listed omissions derive `ScalarKind.String` with `MaxLength=null`. Acceptance: the correct exceptions and type mappings occur and the exception message includes the canonical JSON path.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_A_String_Property_Without_MaxLength|Given_String_Properties_With_Format_And_No_MaxLength|Given_A_Duration_String_Without_MaxLength\"` and confirm it passes.",
      "Confirm the missing-maxLength failure includes the canonical JSON path (e.g., `$.value`) and a remediation hint (e.g., `Set maxLength`).",
      "Confirm `format: date`, `date-time`, and `time` map to `ScalarKind.Date`, `ScalarKind.DateTime`, and `ScalarKind.Time`."
    ],
    "completed": false
  },
  {
    "category": "QA - Decimal Validation",
    "description": "Verify numeric `type: \"number\"` properties require decimal validation metadata and derive deterministic `(precision, scale)` type inputs. Acceptance: number properties fail fast when `decimalPropertyValidationInfos` is missing or incomplete, and succeed when `totalDigits`/`decimalPlaces` are present and valid.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_A_Number_Property_With_Decimal_Validation|Given_A_Number_Property_Without_Decimal_Validation|Given_A_Number_Property_With_Incomplete_Decimal_Validation\"` and confirm it passes.",
      "Confirm the failure message includes the canonical JSON path (e.g., `$.amount`)."
    ],
    "completed": false
  },
  {
    "category": "QA - Diagnostics",
    "description": "Verify name-collision diagnostics are actionable when two schema paths derive the same physical column name. Acceptance: the exception message includes the table name, the colliding derived column name, both colliding source JSON paths, and instructs to use `relational.nameOverrides`.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_Colliding_Column_Names\"` and confirm it passes.",
      "Confirm the exception message contains the derived table name, derived column name, and both colliding JSON paths."
    ],
    "completed": false
  },
  {
    "category": "QA - Extension Site Discovery",
    "description": "Verify `_ext` sites are discovered deterministically at any depth and record correct owning scope, extension path, and project keys. Acceptance: discovered sites are ordered deterministically and project keys are stable-sorted.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"Given_A_JsonSchema_With_Extension_Sites\"` and confirm it passes.",
      "Confirm root site uses owning scope `$` and extension path `$._ext`, and nested collection site uses owning scope `$.<collection>[*]`."
    ],
    "completed": false
  }
]
