Output format is aligned.
Pager usage is off.
          captured_at          |           test_name            | snapshot_stage 
-------------------------------+--------------------------------+----------------
 2025-10-18 16:05:44.721815+00 | test_current_insert_references | before
(1 row)


-- pg_stat_statements (calls ordered by total_exec_time)
                                                         query                                                          | calls | total_exec_time | mean_exec_time | rows | shared_blks_hit | shared_blks_read | shared_blks_dirtied | shared_blks_written | temp_blks_read | temp_blks_written 
------------------------------------------------------------------------------------------------------------------------+-------+-----------------+----------------+------+-----------------+------------------+---------------------+---------------------+----------------+-------------------
 DO $$                                                                                                                 +|     1 |        3.261516 |       3.261516 |    0 |             333 |                0 |                   0 |                   0 |              0 |                 0
 DECLARE                                                                                                               +|       |                 |                |      |                 |                  |                     |                     |                | 
     func_oid oid;                                                                                                     +|       |                 |                |      |                 |                  |                     |                     |                | 
 BEGIN                                                                                                                 +|       |                 |                |      |                 |                  |                     |                     |                | 
     FOR func_oid IN                                                                                                   +|       |                 |                |      |                 |                  |                     |                     |                | 
         SELECT p.oid                                                                                                  +|       |                 |                |      |                 |                  |                     |                     |                | 
         FROM pg_proc p                                                                                                +|       |                 |                |      |                 |                  |                     |                     |                | 
         JOIN pg_namespace n ON n.oid = p.pronamespace                                                                 +|       |                 |                |      |                 |                  |                     |                     |                | 
         WHERE n.nspname = 'dms'                                                                                       +|       |                 |                |      |                 |                  |                     |                     |                | 
     LOOP                                                                                                              +|       |                 |                |      |                 |                  |                     |                     |                | 
         PERFORM pg_stat_reset_single_function_counters(func_oid);                                                     +|       |                 |                |      |                 |                  |                     |                     |                | 
     END LOOP;                                                                                                         +|       |                 |                |      |                 |                  |                     |                     |                | 
 EXCEPTION                                                                                                             +|       |                 |                |      |                 |                  |                     |                     |                | 
     WHEN undefined_function THEN                                                                                      +|       |                 |                |      |                 |                  |                     |                     |                | 
         RAISE NOTICE 'pg_stat_reset_single_function_counters not available on this server, skipping function reset.'; +|       |                 |                |      |                 |                  |                     |                     |                | 
 END                                                                                                                   +|       |                 |                |      |                 |                  |                     |                     |                | 
 $$                                                                                                                     |       |                 |                |      |                 |                  |                     |                     |                | 
 DO $$                                                                                                                 +|     1 |        2.562922 |       2.562922 |    0 |             137 |                0 |                   0 |                   0 |              0 |                 0
 BEGIN                                                                                                                 +|       |                 |                |      |                 |                  |                     |                     |                | 
     IF EXISTS (SELECT 1 FROM pg_extension WHERE extname = 'pg_stat_statements') THEN                                  +|       |                 |                |      |                 |                  |                     |                     |                | 
         PERFORM pg_stat_statements_reset();                                                                           +|       |                 |                |      |                 |                  |                     |                     |                | 
     END IF;                                                                                                           +|       |                 |                |      |                 |                  |                     |                     |                | 
 END                                                                                                                   +|       |                 |                |      |                 |                  |                     |                     |                | 
 $$                                                                                                                     |       |                 |                |      |                 |                  |                     |                     |                | 
 DO $$                                                                                                                 +|     1 |        0.343219 |       0.343219 |    0 |              13 |                0 |                   0 |                   0 |              0 |                 0
 BEGIN                                                                                                                 +|       |                 |                |      |                 |                  |                     |                     |                | 
     BEGIN                                                                                                             +|       |                 |                |      |                 |                  |                     |                     |                | 
         PERFORM pg_stat_reset_shared('wal');                                                                          +|       |                 |                |      |                 |                  |                     |                     |                | 
     EXCEPTION                                                                                                         +|       |                 |                |      |                 |                  |                     |                     |                | 
         WHEN undefined_function OR invalid_parameter_value THEN                                                       +|       |                 |                |      |                 |                  |                     |                     |                | 
             RAISE NOTICE 'pg_stat_reset_shared(wal) not supported on this server, skipping reset.';                   +|       |                 |                |      |                 |                  |                     |                     |                | 
     END;                                                                                                              +|       |                 |                |      |                 |                  |                     |                     |                | 
                                                                                                                       +|       |                 |                |      |                 |                  |                     |                     |                | 
     BEGIN                                                                                                             +|       |                 |                |      |                 |                  |                     |                     |                | 
         PERFORM pg_stat_reset_shared('io');                                                                           +|       |                 |                |      |                 |                  |                     |                     |                | 
     EXCEPTION                                                                                                         +|       |                 |                |      |                 |                  |                     |                     |                | 
         WHEN undefined_function OR invalid_parameter_value THEN                                                       +|       |                 |                |      |                 |                  |                     |                     |                | 
             RAISE NOTICE 'pg_stat_reset_shared(io) not supported on this server, skipping reset.';                    +|       |                 |                |      |                 |                  |                     |                     |                | 
     END;                                                                                                              +|       |                 |                |      |                 |                  |                     |                     |                | 
 END                                                                                                                   +|       |                 |                |      |                 |                  |                     |                     |                | 
 $$                                                                                                                     |       |                 |                |      |                 |                  |                     |                     |                | 
 SELECT pg_stat_reset()                                                                                                 |     1 |        0.136153 |       0.136153 |    1 |               0 |                0 |                   0 |                   0 |              0 |                 0
 SELECT CASE WHEN EXISTS (SELECT $1 FROM pg_extension WHERE extname = $2) THEN $3 ELSE $4 END AS has_pg_stat_statements |     1 |        0.027354 |       0.027354 |    1 |               1 |                0 |                   0 |                   0 |              0 |                 0
 SELECT now() AS captured_at,                                                                                          +|     1 |        0.022876 |       0.022876 |    1 |               0 |                0 |                   0 |                   0 |              0 |                 0
        $1::text AS test_name,                                                                                         +|       |                 |                |      |                 |                  |                     |                     |                | 
        $2::text AS snapshot_stage                                                                                      |       |                 |                |      |                 |                  |                     |                     |                | 
(6 rows)


-- pg_stat_user_functions (dms schema only)
 schemaname | funcname | calls | total_time | self_time 
------------+----------+-------+------------+-----------
(0 rows)


-- pg_stat_statio_user_tables (Document/Alias/Reference)
 relname | heap_blks_hit | heap_blks_read | idx_blks_hit | idx_blks_read | toast_blks_hit | toast_blks_read 
---------+---------------+----------------+--------------+---------------+----------------+-----------------
(0 rows)


-- pg_stat_wal (if available)
 wal_records | wal_fpi | wal_bytes | wal_buffers_full | wal_write | wal_sync | wal_write_time | wal_sync_time 
-------------+---------+-----------+------------------+-----------+----------+----------------+---------------
           0 |       0 |         0 |                0 |         0 |        0 |              0 |             0
(1 row)


-- pgstattuple_approx (Reference table)
 partition_or_total | table_size | total_size_with_indexes | dead_tuple_percent | free_percent 
--------------------+------------+-------------------------+--------------------+--------------
 TOTAL              | 88 kB      | 0 bytes                 |              84.34 |         6.44
 reference_00       | 0 bytes    |                         |                    |             
 reference_01       | 0 bytes    |                         |                    |             
 reference_02       | 0 bytes    |                         |                    |             
 reference_03       | 0 bytes    |                         |                    |             
 reference_04       | 0 bytes    |                         |                    |             
 reference_05       | 0 bytes    |                         |                    |             
 reference_06       | 88 kB      |                         |              84.34 |         6.44
 reference_07       | 0 bytes    |                         |                    |             
 reference_08       | 0 bytes    |                         |                    |             
 reference_09       | 0 bytes    |                         |                    |             
 reference_10       | 0 bytes    |                         |                    |             
 reference_11       | 0 bytes    |                         |                    |             
 reference_12       | 0 bytes    |                         |                    |             
 reference_13       | 0 bytes    |                         |                    |             
 reference_14       | 0 bytes    |                         |                    |             
 reference_15       | 0 bytes    |                         |                    |             
(17 rows)


-- pg_stat_io (if available)
  backend_type  |    object     |  context  | reads | read_time | writes | write_time | extends | extend_time | fsyncs | fsync_time 
----------------+---------------+-----------+-------+-----------+--------+------------+---------+-------------+--------+------------
 checkpointer   | relation      | normal    |       |           |      3 |          0 |         |             |      0 |          0
 client backend | relation      | bulkread  |     0 |         0 |      0 |          0 |         |             |        |           
 client backend | relation      | bulkwrite |     0 |         0 |      0 |          0 |       0 |           0 |        |           
 client backend | relation      | normal    |     0 |         0 |      0 |          0 |       0 |           0 |      0 |          0
 client backend | relation      | vacuum    |     0 |         0 |      0 |          0 |       0 |           0 |        |           
 client backend | temp relation | normal    |     0 |         0 |      0 |          0 |       0 |           0 |        |           
(6 rows)


-- Wait events (sessions tagged with perf_ application_name)
 pid | application_name | state | wait_event_type | wait_event 
-----+------------------+-------+-----------------+------------
(0 rows)

