[
  {
    "category": "Contract - jsonSchemaForInsert",
    "description": "Adopt a single contract: JSON Schema keyword `enum` is unsupported anywhere inside `resourceSchema.jsonSchemaForInsert`. Acceptance: the relational-model build fails fast with a path-inclusive error when `enum` is present (e.g., `$.properties.status.enum`), and no derivation logic or tests assume `enum` can occur.",
    "steps-to-verify": [
      "Confirm the contract text (story/design) explicitly states `enum` cannot occur in `jsonSchemaForInsert` and treat any occurrence as an invalid ApiSchema input.",
      "Keep `src/dms/backend/EdFi.DataManagementService.Backend.RelationalModel/ValidateJsonSchemaStep.cs` rejecting `enum` via `UnsupportedKeywords` with a message that includes `{path}.enum`.",
      "Add/update at least one test that demonstrates a resource schema containing `$.properties.<name>.enum` fails with a message containing that canonical JSON path."
    ],
    "completed": false
  },
  {
    "category": "Relational Model - Guardrails",
    "description": "Remove any implicit/accidental acceptance of `enum` when schema validation is skipped (e.g., direct step execution in unit tests). Acceptance: attempting to derive tables/columns from a schema containing `enum` fails with an unsupported-keyword error before any type/maxLength logic runs.",
    "steps-to-verify": [
      "Choose one approach and apply consistently: (a) ensure unit-test helpers run `ValidateJsonSchemaStep` before derivation steps, or (b) factor unsupported-keyword validation into a shared helper and invoke it from the traversal entry points in derivation steps.",
      "Ensure the failure message for `enum` still includes the canonical path to the keyword (e.g., `$.properties.status.enum`).",
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj`"
    ],
    "completed": false
  },
  {
    "category": "Unit Tests - Derivation",
    "description": "Align derivation unit tests with the `enum`-is-unsupported contract. Acceptance: no derivation unit test uses JSON Schema `enum` as a valid input; instead, tests either (a) expect validation to fail on `enum`, or (b) model MetaEd enumerations via `flatteningMetadata`/allow-list inputs without relying on JSON Schema `enum`.",
    "steps-to-verify": [
      "Update `src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/DeriveColumnsAndDescriptorEdgesStepTests.cs` to remove/replace the fixture that includes `\"enum\": [...]` under a string property.",
      "If retaining coverage for enumeration-like shapes, represent them without JSON Schema `enum` and allow missing `maxLength` only via `StringMaxLengthOmissionPaths` (as extracted from `flatteningMetadata`).",
      "Run the focused tests: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj --filter \"DeriveColumnsAndDescriptorEdgesStepTests|ValidateJsonSchemaStepTests\"`"
    ],
    "completed": false
  },
  {
    "category": "Build",
    "description": "Build and run backend unit tests after aligning `enum` behavior. Acceptance: backend unit tests pass and the DMS solution builds cleanly.",
    "steps-to-verify": [
      "Run: `dotnet test --no-restore ./src/dms/backend/EdFi.DataManagementService.Backend.Tests.Unit/EdFi.DataManagementService.Backend.Tests.Unit.csproj`",
      "Run: `dotnet build --no-restore ./src/dms/EdFi.DataManagementService.sln`"
    ],
    "completed": false
  }
]
